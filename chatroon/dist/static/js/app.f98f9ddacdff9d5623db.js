webpackJsonp([1],{"0tDL":function(e,s,t){"use strict";var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},o=[],i={render:a,staticRenderFns:o};s.a=i},Ds4J:function(e,s,t){"use strict";var a=t("Dd8w"),o=t.n(a),i=t("fZjL"),r=t.n(i),n=firebase.database().ref("/messages/");s.a={name:"ChatRoom",data:function(){return{hoverMessageId:null,userNameSet:!1,userName:"",messages:[],upload:!1,progress:""}},methods:{setName:function(){this.userNameSet=!0},saveName:function(){var e=this,s=document.querySelector("#js-userName").value;""!=s.trim()&&(e.userName=s,e.userNameSet=!1)},getTime:function(){var e=new Date,s=e.getHours(),t=e.getMinutes();return(s>=12?"下午":"上午")+" "+s+":"+(t<10?"0"+t:t)},sendMessage:function(e){var s=this,t=document.querySelector("#js-userName"),a=document.querySelector("#js-message");return!e.shiftKey&&(a.value.length<=1&&""==a.value.trim()?(e.preventDefault(),!1):(n.push({userName:t.value,type:"text",message:a.value,timeStamp:s.getTime()}),a.value="",void e.preventDefault()))},deleteMessage:function(e){n.child(e).remove()},readMore:function(e){e.target.previousElementSibling.setAttribute("style","max-height: 100%;"),e.target.setAttribute("style","display: none;")}},mounted:function(){var e=this;n.on("value",function(s){var t=s.val(),a=t?r()(t).map(function(e){return o()({id:e},t[e])}):null;e.messages=a})},updated:function(){document.querySelectorAll(".messageBox__message").forEach(function(e){e.offsetHeight>300&&e.querySelector(".messageBox__readMore").setAttribute("style","display: block")});var e=document.querySelector("#js-roomBody");e.scrollTop=e.scrollHeight}}},M93x:function(e,s,t){"use strict";function a(e){t("oVVk")}var o=t("xJD8"),i=t("0tDL"),r=t("VU/8"),n=a,u=r(o.a,i.a,!1,n,null,null);s.a=u.exports},NHnr:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("7+uW"),o=t("M93x"),i=t("YaEn");a.a.config.productionTip=!1,new a.a({el:"#app",router:i.a,template:"<App/>",components:{App:o.a}})},RFZe:function(e,s,t){"use strict";function a(e){t("apZs")}var o=t("Ds4J"),i=t("S3Yt"),r=t("VU/8"),n=a,u=r(o.a,i.a,!1,n,"data-v-29b8e3a2",null);s.a=u.exports},S3Yt:function(e,s,t){"use strict";var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"container"},[t("div",{staticClass:"name"},[t("h3",[e._v("名稱："+e._s(e.userName))]),e._v(" "),t("div",{staticClass:"reset",on:{click:function(s){return e.setName()}}},[e._v("重新設定名稱")])]),e._v(" "),t("div",{staticClass:"chatRoom"},[e._m(0),e._v(" "),t("div",{staticClass:"roomBody",attrs:{id:"js-roomBody"}},[e._l(e.messages,function(s){return[s.userName!=e.userName?[t("div",{key:s.id,staticClass:"messageBox"},[t("img",{staticClass:"messageBox__user",attrs:{src:"https://firebasestorage.googleapis.com/v0/b/todo-list-eef4f.appspot.com/o/head.jpg?alt=media&token=527e486e-7625-43bd-be40-51eccbe049e6",draggable:"false"}}),e._v(" "),t("div",{staticClass:"messageBox__content"},[t("div",{staticClass:"messageBox__name"},[e._v(e._s(s.userName))]),e._v(" "),"text"==s.type?t("div",{staticClass:"messageBox__message"},[t("div",{staticClass:"messageBox__text"},[e._v(e._s(s.message))]),e._v(" "),t("div",{staticClass:"messageBox__readMore",on:{click:function(s){return e.readMore(s)}}},[e._v("顯示更多")])]):e._e(),e._v(" "),"image"==s.type?t("div",{staticClass:"messageBox__image"},[t("img",{attrs:{src:s.message}})]):e._e()]),e._v(" "),t("div",{staticClass:"messageBox__time"},[e._v(e._s(s.timeStamp))])])]:e._e(),e._v(" "),s.userName==e.userName?[t("div",{key:s.id,staticClass:"messageBox messageBox--self",on:{mouseenter:function(t){e.hoverMessageId=s.id},mouseleave:function(s){e.hoverMessageId=null}}},[t("div",{staticClass:"messageBox__time"},[e._v(e._s(s.timeStamp))]),e._v(" "),t("div",{staticClass:"messageBox__content"},["text"==s.type?t("div",{staticClass:"messageBox__message"},[t("div",{staticClass:"messageBox__text"},[e._v(e._s(s.message))])]):e._e(),e._v(" "),"image"==s.type?t("div",{staticClass:"messageBox__image"},[t("img",{attrs:{src:s.message}})]):e._e()]),e._v(" "),e.hoverMessageId===s.id?t("div",{staticClass:"messageBox__delete"},[t("span",{on:{click:function(s){return e.deleteMessage(e.hoverMessageId)}}},[e._v("刪除")])]):e._e()])]:e._e()]}),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.upload,expression:"upload"}],staticClass:"messageBox messageBox--self"},[t("div",{staticClass:"messageBox__progress"},[t("div",{staticClass:"messageBox__progress--state",attrs:{id:"js-progressBar"}}),e._v(" "),t("div",{staticClass:"messageBox__progress--number"},[e._v(e._s(e.progress))])])])],2),e._v(" "),t("div",{staticClass:"roomBottom",class:{disable:!e.userName}},[t("div",{staticClass:"roomBottom__tools"},[t("div",{staticClass:"roomBottom__tools_upload"},[t("input",{attrs:{type:"file",accept:"image/*"},on:{change:function(s){return e.sendImage(s)}}})])]),e._v(" "),t("div",{staticClass:"roomBottom__input"},[t("textarea",{staticClass:"roomBottom__input__textarea",class:{disable:!e.userName},attrs:{id:"js-message"},on:{keydown:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.sendMessage(s)}}})])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.userNameSet||""==e.userName,expression:"userNameSet || userName == ''"}],staticClass:"modal"},[t("div",{staticClass:"modal__container"},[e._m(1),e._v(" "),t("div",{staticClass:"modal__body"},[t("input",{staticClass:"userName",attrs:{type:"text",id:"js-userName",maxlength:"6"},domProps:{value:e.userName},on:{keydown:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.saveName()}}}),e._v(" "),t("div",{staticClass:"button",on:{click:function(s){return e.saveName()}}},[e._v("設定")])]),e._v(" "),t("footer",{staticClass:"modal__footer"})])])])},o=[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"roomHead"},[t("div",{staticClass:"roomHead__title"},[e._v("Vue+Firebase聊天室練習")])])},function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("header",{staticClass:"modal__header"},[t("h2",{staticClass:"view-title"},[e._v("輸入名稱")])])}],i={render:a,staticRenderFns:o};s.a=i},YaEn:function(e,s,t){"use strict";var a=t("7+uW"),o=t("/ocq"),i=t("RFZe");a.a.use(o.a),s.a=new o.a({routes:[{path:"/",name:"ChatRoom",component:i.a}]})},apZs:function(e,s){},oVVk:function(e,s){},xJD8:function(e,s,t){"use strict";s.a={name:"app"}}},["NHnr"]);
//# sourceMappingURL=app.f98f9ddacdff9d5623db.js.map